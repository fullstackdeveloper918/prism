/**
 * Phat Video Background
 * @version 2.5
 * @author Fabrice Spee (fspee.com)
 * @copyright	Author
**/
!function(){"use strict";var e=document.getElementsByTagName("script")[0],a=document.createElement("script");a.src="https://www.youtube.com/iframe_api",e.parentNode.insertBefore(a,e);var t,o=document.createElement("script");o.src="https://f.vimeocdn.com/js/froogaloop2.min.js",e.parentNode.insertBefore(o,e),(t=jQuery).fn.extend({phatVideoBg:function(e){return this.each(function(a){var o,i,p,s,r,n=jQuery(this),d=t.extend({},{phattype:!1,phatvideoid:!1,phatmp4:!1,phatwebm:!1,phatogv:!1,phatratio:"16/9",phatloop:!0,phatposter:!1,phatoverlaycolor:!1,phatoverlayopacity:.6,phatmute:!0,phatplaypause:!1,phatplaymobile:!1,phatplayonhover:!1},e,n.data());if(!n.hasClass("phatvideo-bg")){if(n.hasClass("forceratio")){var l=16,u=9;"4/3"===d.phatratio&&(l=4,u=3),"21/9"===d.phatratio&&(l=21,u=9);var h=n.width(),v=parseInt(h*(u/l),10);n.css({"min-height":v+"px"})}n.addClass("phatvideo-bg"),function(e,a,t){"absolute"===e.css("position")&&"relative"===e.css("position")||e.css({position:"relative"}),e.css("background","none"),e.append('<div class="phat-bgvideo-container" style="position:absolute;width:100%;height:100%;top:0;left:0;z-index:-2;overflow:hidden;"><div class="phat-bgvideo-loader" style="position:absolute;width:100%;height:100%;top:0;left:0;z-index:2;"><div class="loader"><span></span><span></span><span></span></div></div></div>');var o=e.find(".phat-bgvideo-container");switch(a.phatposter&&(o.css({background:"url("+a.phatposter+") center center","background-size":"cover"}),o.find(".phat-bgvideo-loader").css({background:"url("+a.phatposter+") center center","background-size":"cover"})),o.prepend('<div class="phat-bgvideo-overlay" style="position:absolute;width:100%;height:100%;top:0;left:0;z-index:1;"></div>'),a.phatoverlaycolor?o.find(".phat-bgvideo-overlay").css({background:a.phatoverlaycolor,opacity:a.phatoverlayopacity}):o.find(".phat-bgvideo-overlay").css({background:"transparent"}),a.phattype){case"youtube":var i="loop=0";(a.phatloop||"true"===a.phatloop)&&(i="loop=1&playlist="+a.phatvideoid);var p=" youtube-muted",s="autoplay=1",r="  youtube-play";(a.phatplayonhover||"true"===a.phatplayonhover)&&(s="autoplay=0",r="  youtube-pause");var n='<iframe id="bgvid-'+t+'" class="video-background'+p+r+'" style="width:100%;height:100%;" src="https://www.youtube.com/embed/'+a.phatvideoid+"?"+s+"&amp;controls=0&amp;"+i+'&amp;showinfo=0&amp;modestbranding=1&amp;disablekb=1&amp;enablejsapi=1" frameborder="0"></iframe>',d="https://www.youtube.com/embed/"+a.phatvideoid+"?"+s;break;case"vimeo":var i="loop=0";(a.phatloop||"true"===a.phatloop)&&(i="loop=1");var p=" vimeo-muted",s="autoplay=1",r="  vimeo-play";(a.phatplayonhover||"true"===a.phatplayonhover)&&(s="autoplay=0",r="  vimeo-pause");var n='<iframe id="bgvid-'+t+'" class="video-background'+p+r+'" style="width:100%;height:100%;" src="https://player.vimeo.com/video/'+a.phatvideoid+"?api=1&"+i+"&"+s+"&background=1&muted=1&player_id=bgvid-"+t+'"></iframe>',d="https://player.vimeo.com/video/"+a.phatvideoid+"?"+s;break;case"html5":var i="";(a.phatloop||"true"===a.phatloop)&&(i=' loop="true"');var p=' muted="muted"',s='autoplay="autoplay"';(a.phatplayonhover||"true"===a.phatplayonhover)&&(s="");var n='<video style="width:100%;height:100%;" class="video-background" preload="auto" '+s+i+p+">";a.phatmp4&&(n+='<source src="'+a.phatmp4+'" type="video/mp4" />'),a.phatwebm&&(n+='<source src="'+a.phatwebm+'" type="video/webm" />'),a.phatogv&&(n+='<source src="'+a.phatogv+'" type="video/ogg" />'),n+="</video>";var d="https://player.vimeo.com/video/"+a.phatmp4}jQuery(window).width()>1024?(a.phatmute&&"false"!=a.phatmute||e.append('<a href="#" id="mute-video-'+t+'" class="mute-video mute-'+a.phattype+' unmute" data-rel="bgvid-'+t+'" style="position:absolute;bottom:15px;left:15px;"><span>Sound</span><span></span><span></span></a>'),(a.phatplaypause||"true"==a.phatplaypause)&&e.append('<a href="#" id="playpause-video-'+t+'" class="playpause-video playpause-'+a.phattype+'" data-rel="bgvid-'+t+'" style="position:absolute;bottom:15px;left:45px;"><span>Play</span><span></span></a>'),o.prepend(n),function(e,a,t){var o=16,i=9;"4/3"===a&&(o=4,i=3),"21/9"===a&&(o=21,i=9);var p=o/i,s=e.find(".phat-bgvideo-container").width(),r=e.find(".phat-bgvideo-container").height(),n=s/r;if(n>p){var d=n/p,l=1.03*parseInt(d*r,10)+300,u=1.03*parseInt(s,10);e.find("iframe.video-background, video.video-background").css({"max-width":"inherit",width:parseInt(u,10)+"px",height:parseInt(l,10)+"px",position:"relative",top:"50%",left:"50%","-webkit-transform":"translateX(-50%) translateY(-50%)","-moz-transform":"translateX(-50%) translateY(-50%)","-ms-transform":"translateX(-50%) translateY(-50%)","-o-transform":"translateX(-50%) translateY(-50%)",transform:"translateX(-50%) translateY(-50%)"})}else{var d=p/n,u=1.03*parseInt(d*s,10),l=1.03*parseInt(r,10)+300;e.find("iframe.video-background, video.video-background").css({"max-width":"inherit",height:parseInt(l,10)+"px",width:parseInt(u,10)+"px",position:"relative",top:"50%",left:"50%","-webkit-transform":"translateX(-50%) translateY(-50%)","-moz-transform":"translateX(-50%) translateY(-50%)","-ms-transform":"translateX(-50%) translateY(-50%)","-o-transform":"translateX(-50%) translateY(-50%)",transform:"translateX(-50%) translateY(-50%)"})}}(e,a.phatratio,a.phattype)):a.phatplaypause&&a.phatplaymobile&&e.append('<a href="'+d+'" class="phatlightcase-play" data-rel="lightcase:phatlightcase-video-'+t+'" style="position:absolute;bottom:15px;left:15px;"><span>Play</span></a>')}(n,d,a),"youtube"===d.phattype&&jQuery(window).width()>1024&&(s=a,r=new YT.Player("bgvid-"+s,{events:{onReady:function(){jQuery("#bgvid-"+s).parent(".phat-bgvideo-container").addClass("loaded"),jQuery("#bgvid-"+s).hasClass("youtube-muted")&&r.mute(),jQuery("body").on("click","#mute-video-"+s+".mute-video",function(){r.isMuted()?r.unMute():r.mute()}),jQuery("body").on("click","#playpause-video-"+s+".playpause-video",function(){jQuery(this).hasClass("play")?r.pauseVideo():r.playVideo()}),jQuery(".play-on-hover.videobg-id-"+s).on({mouseenter:function(){r.playVideo()},mouseleave:function(){r.pauseVideo(),setTimeout(function(){r.seekTo(0)},200)}})}}})),"vimeo"===d.phattype&&jQuery(window).width()>1024&&(o=a,i=document.getElementById("bgvid-"+o),(p=$f(i)).addEvent("ready",function(){setTimeout(function(){p.api("play"),jQuery("#bgvid-"+o).parent(".phat-bgvideo-container").addClass("loaded")},300),jQuery(".videobg-id-"+o).hasClass("play-on-hover")&&setTimeout(function(){p.api("pause")},500),jQuery("#bgvid-"+o).hasClass("vimeo-muted")?p.api("setVolume",0):setTimeout(function(){p.api("setVolume",1)},1e3),setTimeout(function(){p.api("play")},2e3),jQuery(".play-on-hover.videobg-id-"+o).on({mouseenter:function(){p.api("play")},mouseleave:function(){p.api("pause"),setTimeout(function(){p.api("seekTo",0)},200)}})})),"html5"===d.phattype&&jQuery(window).width()>1024&&n.find(".phat-bgvideo-container").addClass("loaded"),d.phatplayonhover&&n.addClass("play-on-hover"),n.addClass("videobg-id-"+a)}})}}),jQuery("body").on("click",".mute-video",function(){if(jQuery(this).hasClass("mute-html5")){var e=jQuery(this).siblings(".phat-bgvideo-container").find("video");0==e.prop("muted")?e.prop("muted",!0):e.prop("muted",!1)}else if(jQuery(this).hasClass("mute-vimeo")){var a=jQuery(this).data("rel"),t=document.getElementById(a),o=$f(t);jQuery(this).hasClass("unmute")?o.api("setVolume",1):o.api("setVolume",0)}return jQuery(this).toggleClass("unmute"),!1}),jQuery("body").on("click",".playpause-video",function(){if(jQuery(this).hasClass("playpause-html5")){var e=jQuery(this).siblings(".phat-bgvideo-container").find("video").get(0);jQuery(this).hasClass("play")?e.play():e.pause()}else if(jQuery(this).hasClass("playpause-vimeo")){var a=jQuery(this).data("rel"),t=document.getElementById(a),o=$f(t);jQuery(this).hasClass("play")?o.api("play"):o.api("pause")}return jQuery(this).toggleClass("play"),!1}),jQuery("body").on("mouseenter",".videobg-section.play-on-hover",function(){if(jQuery(this).find(".phat-bgvideo-container > video").length>0){var e=jQuery(this).find(".phat-bgvideo-container > video");jQuery(e)[0].play()}}).on("mouseleave",".videobg-section.play-on-hover",function(){if(jQuery(this).find(".phat-bgvideo-container > video").length>0){var e=jQuery(this).find(".phat-bgvideo-container > video");jQuery(e)[0].pause(),setTimeout(function(){jQuery(e)[0].currentTime=0},200)}})}(jQuery);