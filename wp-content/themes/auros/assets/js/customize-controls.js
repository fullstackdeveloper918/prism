"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_createClass=function(){function t(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,o,n){return o&&t(e.prototype,o),n&&t(e,n),e}}();$(document).ready(function(){new OTFControlColor,new OTFControlSlider,new OTFControlGoogleFont,new OTFControlFontStyle,new OTFControlImageSelect,new OTFControlButtonMove,new OTFControlSearch,wp.customize.previewer.bind("refresh-frame",function(){wp.customize.previewer.refresh()}),wp.customize.previewer.bind("opal-save-and-reload",function(){wp.customize.previewer.save().then(function(){wp.customize.previewer.refresh();var t=$("#customize-preview iframe").get(0);t.src=t.src})})});var OTFControlButtonMove=function(){function t(){var e=this;_classCallCheck(this,t),this.button="[otf-button-move]",$(this.button).on("click",function(t){var o=t.target.getAttribute("data-id"),n=t.target.getAttribute("data-type");"section"===n?wp.customize.section(o).expand():"control"===n&&e.moveControl(o,n)}),wp.customize.previewer.bind("preview-move",function(t){"section"===t.type?wp.customize.section(t.id)&&wp.customize.section(t.id).expand():"control"===t.type&&e.moveControl(t.id,t.trigger)})}return _createClass(t,[{key:"moveControl",value:function(t,e){var o=wp.customize.control(t);o.expand(),setTimeout(function(){if(e)e=e.split("|"),e.length>1&&$(o.selector+" "+e[0]).trigger(e[1]);else{var t=$("input,select, button, textarea",o.selector).first(),n=t.val();t.focus(),t.val(""),t.val(n)}},300)}}]),t}(),OTFControlColor=function t(){_classCallCheck(this,t),$("input.alpha-color-control").alphaColorPicker()},OTFCustomizeCore=function(){function t(){_classCallCheck(this,t)}return _createClass(t,null,[{key:"getId",value:function(t){return t.data("id")}},{key:"setValue",value:function(t,e){wp.customize.control(this.getId(t)).setting.set(e)}}]),t}();wp.customize.bind("ready",function(){wp.customize("otf_colors_header_skin",function(t){var e=function(){var e={otf_colors_header_bg:"custom",otf_colors_header_color:"custom",otf_colors_topbar_bg:"custom",otf_colors_topbar_color:"custom"},o=""+t.get();for(var n in e)$("#customize-control-"+n).hide(),e[n]===o&&$("#customize-control-"+n).show()};e(),t.bind(e)}),wp.customize("otf_colors_footer_skin",function(t){var e=function(){var e={otf_colors_footer_bg:"custom",otf_colors_footer_color:"custom",otf_colors_copyright_bg:"custom",otf_colors_copyright_color:"custom"},o=""+t.get();for(var n in e)$("#customize-control-"+n).hide(),e[n]===o&&$("#customize-control-"+n).show()};e(),t.bind(e)}),wp.customize("otf_colors_buttons_enable_custom",function(t){var e=function(){var e={otf_colors_title_buttons_primary:"true",otf_colors_buttons_primary_bg:"true",otf_colors_buttons_primary_border:"true",otf_colors_buttons_primary_color:"true",otf_colors_title_buttons_secondary:"true",otf_colors_buttons_secondary_bg:"true",otf_colors_buttons_secondary_border:"true",otf_colors_buttons_secondary_color:"true"},o=""+t.get();for(var n in e)$("#customize-control-"+n).hide(),e[n]===o&&$("#customize-control-"+n).show()};e(),t.bind(e)}),wp.customize("otf_layout_general_layout_mode",function(t){var e=function(){var e={otf_layout_general_layout_boxed_width:"boxed",otf_layout_general_layout_side_header_width:"sideHeader",otf_layout_general_layout_side_header_position:"sideHeader"},o=""+t.get();for(var n in e)$("#customize-control-"+n).hide(),e[n]===o&&$("#customize-control-"+n).show()};e(),t.bind(e)}),wp.customize("otf_layout_general_content_width_type",function(t){var e=function(){var e={otf_layout_general_content_width_px:"px",otf_layout_general_content_width_percent:"%"},o=""+t.get();for(var n in e)$("#customize-control-"+n).hide(),e[n]===o&&$("#customize-control-"+n).show()};e(),t.bind(e)}),wp.customize("otf_layout_sidebar_is_boxed",function(t){var e=function(){var e={otf_layout_sidebar_title_outside:"true",otf_layout_sidebar_sidebar_heading_title:"true",otf_layout_sidebar_padding_inside_boxed:"true",otf_colors_sidebar_border_color:"true",otf_colors_sidebar_bg_color:"true",otf_layout_sidebar_padding:"true",otf_layout_sidebar_margin:"true"},o=""+t.get();for(var n in e)$("#customize-control-"+n).hide(),e[n]===o&&$("#customize-control-"+n).show()};e(),t.bind(e)}),wp.customize("otf_woocommerce_product_color_custom_enable",function(t){var e=function(){var e={otf_woocommerce_product_color_heading_add_to_cart:"true",otf_woocommerce_product_color_add_to_cart:"true",otf_woocommerce_product_color_bg_add_to_cart:"true",otf_woocommerce_product_color_border_add_to_cart:"true",otf_woocommerce_product_color_heading_quick_view:"true",otf_woocommerce_product_color_quick_view:"true",otf_woocommerce_product_color_bg_quick_view:"true",otf_woocommerce_product_color_border_quick_view:"true",otf_woocommerce_product_color_heading_wish_list:"true",otf_woocommerce_product_color_wish_list:"true",otf_woocommerce_product_color_bg_wish_list:"true",otf_woocommerce_product_color_border_wish_list:"true",otf_woocommerce_product_color_heading_compare:"true",otf_woocommerce_product_color_compare:"true",otf_woocommerce_product_color_bg_compare:"true",otf_woocommerce_product_color_border_compare:"true",otf_woocommerce_product_color_heading_label_sale:"true",otf_woocommerce_product_color_label_sale:"true",otf_woocommerce_product_color_bg_label_sale:"true",otf_woocommerce_product_color_border_label_sale:"true"},o=""+t.get();for(var n in e)$("#customize-control-"+n).hide(),e[n]===o&&$("#customize-control-"+n).show()};e(),t.bind(e)}),wp.customize("otf_footer_layout",function(t){var e=function(){var e={otf_footer_copyright:"0"},o=""+t.get();for(var n in e)$("#customize-control-"+n).hide(),e[n]===o&&$("#customize-control-"+n).show()};e(),t.bind(e)}),wp.customize("otf_page_404_page_enable",function(t){var e=function(){var e={otf_page_404_bg_image:"default",otf_page_404_bg_position:"default",otf_page_404_bg_repeat:"default",otf_page_404_bg:"default",otf_page_404_page_custom:"custom"},o=""+t.get();for(var n in e)$("#customize-control-"+n).hide(),e[n]===o&&$("#customize-control-"+n).show()};e(),t.bind(e)})});var OTFControlFontStyle=function(){function t(){var e=this;_classCallCheck(this,t),this.container="[otf-font-style-control]",this.italic=".otf-italic",this.fontWeight=".otf-font-weight",this.underline=".otf-underline",this.uppercase=".otf-uppercase",$("#customize-theme-controls "+this.container).each(function(t,o){$(e.italic+", "+e.fontWeight+", "+e.underline+", "+e.uppercase,o).on("change",function(t){e.setValue($(t.currentTarget).closest(e.container))})})}return _createClass(t,[{key:"setValue",value:function(t){var e={italic:t.find(this.italic).prop("checked"),underline:t.find(this.underline).prop("checked"),fontWeight:t.find(this.fontWeight).prop("checked"),uppercase:t.find(this.uppercase).prop("checked")};OTFCustomizeCore.setValue(t,e)}}]),t}(),OTFControlGoogleFont=function(){function t(){var e=this;_classCallCheck(this,t),this.container="[otf-fonts-control]",this.googleFont=".otf-customize-google-fonts",this.googleFontWeight=".otf-font-weight select",this.googleFontSubsets=".otf-font-subsets select",$("#customize-theme-controls "+this.container).each(function(t,o){var n=$(o);e.initSelect2(n.find(e.googleFont)),e.initFontExtend(n.find(e.googleFontWeight)),e.initFontExtend(n.find(e.googleFontSubsets))})}return _createClass(t,[{key:"initFontExtend",value:function(t){var e=this;t.val(t.data("value")),t.on("change",function(){e.setValue(t.closest(e.container))})}},{key:"initSelect2",value:function(t){var e=this;this.initFontStyleHtml(t),t.select2_custom({templateResult:this.renderTemplate,templateSelection:this.renderTemplate}).on("change",function(){e.initFontStyleHtml(t),e.setValue(t.closest(e.container))})}},{key:"setValue",value:function(t){var e={family:t.find(this.googleFont+" option:selected").attr("value"),subsets:t.find(this.googleFontSubsets+" option:selected").attr("value"),fontWeight:t.find(this.googleFontWeight+" option:selected").attr("value")};OTFCustomizeCore.setValue(t,e)}},{key:"initFontStyleHtml",value:function(t){var e=t.closest(this.container),o=t.children("option:selected").data("info"),n="",r="";if("object"===(void 0===o?"undefined":_typeof(o))){if(o.variants){n+='<option value="400">400</option>';var i=!0,c=!1,a=void 0;try{for(var l,s=o.variants[Symbol.iterator]();!(i=(l=s.next()).done);i=!0){var u=l.value;n+='<option value="'+u+'">'+u+"</option>"}}catch(t){c=!0,a=t}finally{try{!i&&s.return&&s.return()}finally{if(c)throw a}}}if(o.subsets){var _=!0,f=!1,d=void 0;try{for(var m,h=o.subsets[Symbol.iterator]();!(_=(m=h.next()).done);_=!0){var p=m.value;r+='<option value="'+p+'">'+p+"</option>"}}catch(t){f=!0,d=t}finally{try{!_&&h.return&&h.return()}finally{if(f)throw d}}}}e.find(".otf-font-weight select").html(n),e.find(".otf-font-subsets select").html(r)}},{key:"renderTemplate",value:function(t){if(!t.id)return t.text;var e=t.id.toLocaleLowerCase().replace(/\s+/,"-");return $("<span>"+t.text+'</span><span class="otf-font '+e+'"></span>')}}]),t}(),OTFControlImageSelect=function(){function t(){var e=this;_classCallCheck(this,t),this.container="[otf-select-image-control]",this.listImage=".select-list-image",this.settingId="",this.$container="",this.createImageSelectLayout(),$("body").on("click",function(t){$(t.currentTarget).hasClass("changing-image")&&e.closePanel()}),$("#customize-theme-controls "+this.container+" "+this.listImage+" li").on("click",function(t){var o=$(t.currentTarget);if(!o.hasClass("active")){var n=o.closest(e.listImage),r=o.closest(e.container);n.children("li").removeClass("active"),o.addClass("active"),OTFCustomizeCore.setValue(r,o.find("img").attr("alt"))}}),$(document).on("click",".button-change-image",function(t){t.preventDefault();var o=$("body");if(o.hasClass("changing-image"))e.closePanel();else{e.$container=$(t.currentTarget).closest(".opal-control-image-select");var n=e.$container.children(".image-select"),r=n.html();e.settingId=e.$container.data("id"),e.setPanelContent(r.trim()),o.addClass("changing-image")}}).on("click",".image-select-tpl",function(t){t.stopPropagation();var o=$(t.currentTarget);if(!o.hasClass("active")&&e.$container){var n=$("#customize-control-"+e.settingId),r=o.children("img").attr("alt");n.find(".image-select-tpl").removeClass("active"),n.find('.image-select-tpl[data-value="'+r+'"]').addClass("active"),OTFCustomizeCore.setValue(e.$container,r)}e.closePanel()})}return _createClass(t,[{key:"createImageSelectLayout",value:function(){$("body .wp-full-overlay").append('<div id="select-image-left">\x3c!-- compatibility with JS which looks for widget templates here --\x3e\n    <div id="available-select-image">\n        <div id="available-images-list">\n                \n        </div>\x3c!-- #available-images-list --\x3e\n    </div>\x3c!-- #available-select-image --\x3e\n</div>')}},{key:"setPanelContent",value:function(t){$("#available-images-list").html(t)}},{key:"closePanel",value:function(){$("body").removeClass("changing-image")}}]),t}(),OTFControlSearch=function(){function t(){_classCallCheck(this,t),this.container="#otf-customize-quick-search",$("#customize-header-actions").length>0&&this.init()}return _createClass(t,[{key:"init",value:function(){}},{key:"renderHtml",value:function(){return'<div id="'+this.container.replace("#","")+'">\n    <input class="search-for" type="text" value="" placeholder="Search...">\n    <div class="search-results hidden"></div>\n</div>'}}]),t}(),OTFControlSlider=function(){function t(){var e=this;_classCallCheck(this,t),$(".otf-customize-slider .otf-slider").each(function(t,o){e.initSlider(o)})}return _createClass(t,[{key:"initSlider",value:function(t){var e=$(t),o=e.data("id"),n=e.data("unit")?e.data("unit"):"";e.slider({range:"min",min:e.data("min"),max:e.data("max"),step:e.data("step"),value:e.data("value"),create:function(t,o){e.children(".ui-slider-handle").html("<span>"+e.slider("value")+n+"</span>")},slide:function(t,r){e.children(".ui-slider-handle").html("<span>"+r.value+n+"</span>"),wp.customize.control(o).setting.set(r.value)},change:function(t,r){e.children(".ui-slider-handle").html("<span>"+r.value+n+"</span>"),wp.customize.control(o).setting.set(r.value)}}),e.next().on("click",function(){e.slider("value",e.data("default-value"))})}}]),t}();
//# sourceMappingURL=customize-controls.js.map
